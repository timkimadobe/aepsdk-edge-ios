name: Release (iOS)

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'Existing tag (version) being released (ex: 5.0.1).'
        required: true

      run_full_release:
        description: 'Run full release process: SPM and podspec validation, build artifacts, GH release (`false` to only check podspec version).'
        required: true
        default: true
        type: boolean

      release_pod:
        description: 'Release to Cocoapods (`false` to skip).'
        required: true
        default: true
        type: boolean

jobs:
  release:
    uses: timkimadobe/aepsdk-commons/.github/workflows/ios-release.yml@release-script-update
    with:
      tag: ${{ github.event.inputs.tag }}
      run_full_release: ${{ github.event.inputs.run_full_release == 'true' }}
      release_pod: ${{ github.event.inputs.release_pod == 'true '}}
      library_name: AEPEdge
      scheme_name_xcframework: AEPEdgeXCF
      test_app_ios_scheme: TestAppiOS
      test_app_tvos_scheme: TestApptvOS
    secrets: inherit
